version: "2"
plugins:
  - name: rust-gen
    env:
      - RUST_BACKTRACE
      - RUST_LOG
    wasm:
      url: file://./../../target/wasm32-wasip1/release/sqlc-gen.wasm
      sha256: 4212c42aa375eedbfc372b8e4b01124c73cb1b6f53665f9d6e3232c50a72f5a8
# - name: js
#   process:
#     cmd: sqlc-gen-json
sql:
  - schema: postgresql/migrations/
    queries: postgresql/query.sql
    engine: postgresql
    codegen:
      - out: src/db
        plugin: rust-gen
        options:
          #   use_async: true
          use_deadpool: false
          rules:
            - type: '*'
              derive:
                - Clone
                - Debug
                - PartialEq
    # - out: gen
    #   plugin: js
